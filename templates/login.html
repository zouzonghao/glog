{{ template "base.html" . }}

{{ define "title" }}登录{{ end }}

{{ define "content" }}
<div class="editor-container" style="margin-top: 4rem;">
    <form id="login-form" action="/login" method="post" class="editor-form">
        <div class="form-group" style="display: flex; align-items: center; justify-content: center; gap: 1rem;">
            <input type="password" id="password" name="password" required autocomplete="current-password" placeholder="请输入密码" style="flex-grow: 1; max-width: 200px;">
            <button type="submit" id="login-btn" style="font-size: 1.2em; flex-shrink: 0; border: none; background: none; cursor: pointer; color: var(--textColor); border-bottom: 1px solid var(--textColor); padding: 0;">登录</button>
        </div>
    </form>
</div>
{{ end }}

{{ define "scripts" }}
<script>
    document.getElementById('login-form').addEventListener('submit', function(event) {
        event.preventDefault();
        const form = event.target;
        const formData = new FormData(form);

        fetch(form.action, {
            method: 'POST',
            body: new URLSearchParams(formData)
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                window.location.href = '/admin/';
            } else {
                showNotification(data.message, 'error');
            }
        })
        .catch(error => {
            console.error('登录请求失败:', error);
            showNotification('登录请求失败，请检查网络！', 'error');
        });
    });
</script>
{{ end }}
{{ template "base.html" . }}

{{ define "title" }}{{ if .post }}编辑文章{{ else }}写新文章{{ end }}{{ end }}

{{ define "head" }}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
{{ end }}

{{ define "content" }}
    <form action="/admin/save" method="POST" class="editor-form">
        <input type="hidden" name="id" value="{{ if .post }}{{ .post.ID }}{{ else }}0{{ end }}">
        <div class="form-group">
            <label for="title">标题</label>
            <input type="text" id="title" name="title" value="{{ if .post }}{{ .post.Title }}{{ end }}" required>
        </div>
        <div class="form-group">
            <label for="content">内容 (Markdown)</label>
            <textarea id="content" name="content" rows="20">{{ if .post }}{{ .post.Content }}{{ end }}</textarea>
        </div>
        <div class="form-group-inline">
            <input type="checkbox" id="published" name="published" {{ if .post }}{{ if .post.Published }}checked{{ end }}{{ end }}>
            <label for="published">发布</label>
        </div>
        <div class="form-group">
            <button type="submit">保存</button>
        </div>
    </form>
{{ end }}

{{ define "scripts" }}
    <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
    <script>
        var simplemde = new SimpleMDE({ element: document.getElementById("content") });
    </script>
{{ end }}